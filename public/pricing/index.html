<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>MathGPT Pricing — Plans</title>
  <meta name="description" content="Choose a plan and subscribe. Price is managed in Paystack dashboard. After payment, you’ll be redirected to Chat.">

  <link rel="canonical" href="https://gptshelp.online/pricing/" />
  <meta name="theme-color" content="#6f42c1" />
  <link rel="icon" href="/static/brand/favicon.ico" />
  <link rel="apple-touch-icon" href="/static/brand/logo-192.png" />
  <link rel="manifest" href="/manifest.webmanifest" />

  <style>
    :root{--brand:#6f42c1;--bg:#f8f9fa;--text:#212529;--muted:#6c757d;--border:#eee;--shadow:0 16px 36px rgba(0,0,0,.08)}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--text)}
    a{color:var(--brand);text-decoration:none}
    header{background:#fff;border-bottom:1px solid #eee}
    .nav{max-width:1200px;margin:0 auto;padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between}
    .brand{font-weight:800}
    .nav-right{display:flex;gap:.5rem}
    .btn{border:1px solid var(--border);background:#fff;color:var(--brand);padding:.55rem .9rem;border-radius:10px;cursor:pointer;font-weight:600}
    .btn.primary{background:var(--brand);color:#fff;border-color:transparent}
    .btn[disabled]{opacity:.7;cursor:progress}
    main{max-width:1200px;margin:0 auto;padding:2rem}
    h1{margin-top:.2rem}
    .plans{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-top:1.25rem}
    .plan{background:#fff;border:1px solid #eee;border-radius:14px;padding:2rem;text-align:center;box-shadow:var(--shadow);position:relative}
    .plan ul{list-style:none;padding:0;color:var(--muted);text-align:left;margin:1rem 0}
    .plan li{margin:.35rem 0}
    .badge{position:absolute;top:12px;right:12px;background:var(--brand);color:#fff;font-size:.75rem;padding:.25rem .5rem;border-radius:999px}
    .notice{margin:1rem 0 0;padding:.9rem 1rem;border-radius:10px;background:#fff3cd;color:#664d03;border:1px solid #ffecb5;display:none}
    footer{text-align:center;padding:2rem;color:var(--muted);margin-top:2rem;border-top:1px solid #eee}
  </style>
</head>
<body>
  <header>
    <div class="nav" role="navigation" aria-label="Primary">
      <a class="brand" href="/">GPTs Help</a>
      <div class="nav-right">
        <a class="btn" href="/overview/">Overview</a>
        <a class="btn" href="/download/">Download</a>
        <a class="btn" href="/support/">Support</a>
        <a class="btn primary" href="/chat.html">Open Chat</a>
      </div>
    </div>
  </header>

  <main>
    <h1>Pricing</h1>
    <p style="color:#6c757d;margin:.25rem 0 1rem">Final prices are managed in the Paystack dashboard. You’ll confirm on Paystack and return to Chat.</p>

    <div id="notice" class="notice" role="status" aria-live="polite"></div>

    <div class="plans">
      <div class="plan">
        <h3>Free</h3>
        <ul>
          <li><strong>2 Photo Solves</strong></li>
          <li>Basic step-by-step answers</li>
          <li>Try before you buy</li>
        </ul>
        <a class="btn" href="/chat.html?signup=1">Start Free</a>
      </div>

      <div class="plan">
        <div class="badge">Popular</div>
        <h3>Plus (subscription)</h3>
        <ul>
          <li><strong>Unlimited Photo Solves</strong></li>
          <li>Advanced explanations &amp; proofs</li>
          <li>Priority processing</li>
        </ul>
        <button id="btnPlus" class="btn primary" type="button">Subscribe to Plus</button>
      </div>

      <div class="plan">
        <h3>Pro (subscription)</h3>
        <ul>
          <li><strong>Unlimited Photo Solves</strong></li>
          <li>Team features &amp; exports</li>
          <li>Best value annually</li>
        </ul>
        <button id="btnPro" class="btn primary" type="button">Subscribe to Pro</button>
      </div>
    </div>
  </main>

  <footer>&copy; <span id="y"></span> GPTs Help</footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    const notice = document.getElementById('notice');
    function show(msg){ notice.textContent = msg; notice.style.display = 'block'; }
    function clearNotice(){ notice.textContent = ''; notice.style.display = 'none'; }

    async function startCheckout(plan) {
      clearNotice();
      const btn = plan === 'PLUS' ? document.getElementById('btnPlus') : document.getElementById('btnPro');
      btn.disabled = true;

      try {
        const res = await fetch('/api/paystack/init', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify({ plan })
        });
        const data = await res.json().catch(() => ({}));
        if (!res.ok) {
          if (res.status === 401) throw new Error('Please sign in first. Open Chat to create an account, verify your email, then return here.');
          throw new Error(data?.message || 'Could not start checkout.');
        }
        if (data?.authorization_url) {
          window.location.href = data.authorization_url; // Paystack will handle payment & return
          return;
        }
        throw new Error('Missing authorization URL.');
      } catch (e) {
        show(e.message || 'Something went wrong.');
      } finally {
        btn.disabled = false;
      }
    }

    document.getElementById('btnPlus').addEventListener('click', () => startCheckout('PLUS'));
    document.getElementById('btnPro').addEventListener('click', () => startCheckout('PRO'));
  </script>
</body>
</html>